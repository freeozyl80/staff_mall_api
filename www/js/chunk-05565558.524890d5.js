(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05565558"],{"0abf":function(t,e,a){"use strict";a.d(e,"i",function(){return i}),a.d(e,"j",function(){return o}),a.d(e,"h",function(){return u}),a.d(e,"p",function(){return s}),a.d(e,"a",function(){return d}),a.d(e,"d",function(){return c}),a.d(e,"o",function(){return p}),a.d(e,"m",function(){return f}),a.d(e,"l",function(){return m}),a.d(e,"n",function(){return l}),a.d(e,"k",function(){return g}),a.d(e,"s",function(){return h}),a.d(e,"q",function(){return _}),a.d(e,"b",function(){return y}),a.d(e,"f",function(){return v}),a.d(e,"g",function(){return q}),a.d(e,"r",function(){return b}),a.d(e,"c",function(){return w}),a.d(e,"e",function(){return x});var r=a("2777"),n=a("f121"),i=function(t){var e=t.fid,a=n["apiHost"]+"/manage/firm/detail";return r["a"].request({url:a,method:"get",params:{fid:e}})},o=function(t){var e=t.pageIndex,a=t.pageSize,i=n["apiHost"]+"/manage/firm/list";return r["a"].request({url:i,method:"get",params:{page_index:e,page_size:a}})},u=function(t){var e=n["apiHost"]+"/manage/firm/add",a=new FormData;return a.set("firmname",t.firmName),a.set("firm_realname",t.firmRealName),a.set("balance",t.balance),r["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:a})},s=function(t){var e=n["apiHost"]+"/manage/firm/update",a=new FormData;return a.set("firmname",t.firmName),a.set("firm_realname",t.firmRealName),a.set("balance",t.balance),r["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:a,params:{fid:t.fid}})},d=function(t){var e=t.pageIndex,a=t.pageSize,i=t.auth1,o=n["apiHost"]+"/manage/firm/account";return r["a"].request({url:o,method:"get",params:{fid:i,page_index:e,page_size:a}})},c=function(t){var e=t.auth1,a=t.uid,i=t.uname,o=t.type,u=n["apiHost"]+"/manage/firm/delegate";return r["a"].request({url:u,method:"get",params:{type:o,fid:e,uname:i,uid:a}})},p=function(t){var e=t.pageIndex,a=t.pageSize,i=t.fid,o=n["apiHost"]+"/manage/product/firm/list";return r["a"].request({url:o,method:"get",params:{fid:i,page_index:e,page_size:a}})},f=function(t){var e=t.fid,a=t.pid,i=n["apiHost"]+"/manage/product/firm/detail";return r["a"].request({url:i,method:"get",params:{fid:e,pid:a}})},m=function(t){var e=n["apiHost"]+"/manage/product/firm/new",a=new FormData;return a.set("fid",t.fid),a.set("product_name",t.productName),a.set("product_realname",t.productRealname),a.set("category_id",t.categoryId),a.set("category_name",t.categoryName),a.set("category_realname",t.categoryRealname),a.set("supplier_id",t.supplierId),a.set("supplier_name",t.supplierName),a.set("supplier_realname",t.supplierRealname),a.set("product_price",t.productPrice),a.set("product_count",t.productCount),a.set("product_img",t.productImg),a.set("product_status",t.productStatus),a.set("product_desc",t.productDesc),a.set("product_banner_list",t.productBannerList.join(",")),a.set("product_detail_list",t.productDetailList.join(",")),r["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:a})},l=function(t){var e=n["apiHost"]+"/manage/product/firm/update",a=new FormData;return a.set("fid",t.fid),a.set("pid",t.pid),a.set("product_name",t.productName),a.set("product_realname",t.productRealname),a.set("category_id",t.categoryId),a.set("category_name",t.categoryName),a.set("category_realname",t.categoryRealname),a.set("supplier_id",t.supplierId),a.set("supplier_name",t.supplierName),a.set("supplier_realname",t.supplierRealname),a.set("product_price",t.productPrice),a.set("product_count",t.productCount),a.set("product_img",t.productImg),a.set("product_status",t.productStatus),a.set("product_desc",t.productDesc),a.set("product_banner_list",t.productBannerList.join(",")),a.set("product_detail_list",t.productDetailList.join(",")),r["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:a})},g=function(t){var e=t.fid,a=n["apiHost"]+"/manage/product/firm/categroy/list";return r["a"].request({url:a,method:"get",params:{fid:e,page_index:1,page_size:100}})},h=function(){var t=n["apiHost"]+"/manage/supplier/list";return r["a"].request({url:t,method:"get",params:{page_index:1,page_size:100}})},_=function(t){var e=t.uid,a=t.fid,i=n["apiHost"]+"/manage/firm/staff";return r["a"].request({url:i,method:"get",params:{fid:a,uid:e}})},y=function(t){var e=n["apiHost"]+"/manage/firm/staff/add",a=new FormData;return a.set("name",t.username),a.set("realname",t.userRealname),a.set("pwd",t.password),r["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:a,params:{fid:t.fid}})},v=function(t){var e=t.uid,a=t.fid,i=t.coin,o=n["apiHost"]+"/manage/firm/staff/coin",u=new FormData;return u.set("data",i),r["a"].request({url:o,method:"post",headers:{"Content-Type":"application/form-data"},data:u,params:{fid:a,uid:e}})},q=function(t){var e=t.uids,a=t.fid,i=t.coin,o=n["apiHost"]+"/manage/firm/staff/list/coin",u=new FormData;return u.set("data",i),r["a"].request({url:o,method:"post",headers:{"Content-Type":"application/form-data"},data:u,params:{fid:a,uids:e.join(",")}})},b=function(t){var e=t.fid,a=t.pageIndex,i=t.pageSize,o=n["apiHost"]+"/manage/order/list";return r["a"].request({url:o,method:"get",params:{fid:e,page_index:a,page_size:i}})},w=function(t){var e=t.fid,a=t.orderId,i=n["apiHost"]+"/manage/order/cancel",o=new FormData;return o.set("orderId",a),r["a"].request({url:i,method:"post",data:o,params:{fid:e}})},x=function(t){var e=t.fid,a=t.orderId,i=n["apiHost"]+"/manage/order/deliver",o=new FormData;return o.set("orderId",a),r["a"].request({url:i,method:"post",data:o,params:{fid:e}})}},c1db3:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mg-detail"},[a("Breadcrumb",[a("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),a("BreadcrumbItem",{attrs:{to:"/home/association_list"}},[t._v("合作机构列表")]),a("BreadcrumbItem",[t._v(t._s(t.$route.query.firmname)+": 员工列表")])],1),a("Button",{staticStyle:{margin:"30px 0 30px"},attrs:{type:"primary"},on:{click:function(e){return t.importStaff()}}},[t._v("+ 导入员工列表")]),a("br"),a("Button",{staticStyle:{margin:"30px 0 30px"},attrs:{type:"default"},on:{click:function(e){return t.addStaff()}}},[t._v("+ 新增单个员工")]),a("br"),a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"福利点数值"},model:{value:t.coin,callback:function(e){t.coin=e},expression:"coin"}}),t._v("\n  \n"),a("Button",{staticStyle:{margin:"30px 0 30px"},attrs:{type:"warning"},on:{click:function(e){return t.addCoin()}}},[t._v("+ 批量增加福利点数")]),a("Table",{attrs:{columns:t.columns,data:t.listData},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.row;e.index;return["1000"==r.auth2?a("Button",{staticClass:"mg-button",attrs:{type:"default",size:"small"},on:{click:function(e){return t.delegate(r,"off")}}},[t._v("取缔管理员")]):t._e(),"1000"!=r.auth2?a("Button",{staticClass:"mg-button",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.delegate(r,"on")}}},[t._v("设定为管理员")]):t._e(),t._v("\n            \n      "),a("Button",{staticClass:"mg-button",attrs:{type:"default",size:"small"},on:{click:function(e){return t.staff(r,"on")}}},[t._v("staff操作")]),t._v("\n\n            \n      "),a("Button",{staticClass:"mg-button",attrs:{type:"warning",size:"small"},on:{click:function(e){return t.reset(r)}}},[t._v("密码重置")])]}}])}),[a("Page",{attrs:{total:t.total,"show-sizer":"false","page-size":t.pageData.pageSize,current:t.pageData.pageIndex},on:{"on-change":t.jump}})]],2)},n=[],i=(a("7f7f"),a("0abf")),o=a("df02"),u={name:"AssociationAccount",data:function(){return{total:0,pageData:{pageSize:10,pageIndex:1},coin:0,columns:[{title:"用户id",key:"uid"},{title:"账户名",key:"username"},{title:"操作",key:"action",slot:"action",width:500}],listData:[]}},watch:{$route:function(t,e){var a=this;"association_staff"==t&&a.fetch()}},mounted:function(){var t=this;t.fetch()},methods:{importStaff:function(){this.$router.push({name:"account_import",query:{fid:this.$route.query.fid,firmname:this.$route.query.firmname,from:this.$route.name}})},jump:function(t){var e=this;e.pageData.pageIndex=t,e.fetch(e.pageData.pageIndex,e.pageData.pageSize)},fetch:function(t,e){var a=this;Object(i["a"])({auth1:a.$route.query.fid,pageIndex:t||a.pageData.pageIndex,pageSize:e||a.pageData.pageSize}).then(function(t){t.ok?(a.listData=t.data.list||[],a.total=t.data.total):a.$Message.error(t.errorMsg+":"+t.info)})},delegate:function(t,e){var a=this;this.$Modal.confirm({render:function(t){return t("div",[t("h2","确认操作"),t("h4","off"==e?"请确认取缔管理员？":"请确认设定管理员？")])},onOk:function(){Object(i["d"])({type:e,auth1:a.$route.query.fid,uid:t.uid,uanme:t.username}).then(function(t){t.ok?(a.$Message.success("管理员操作成功"),setTimeout(function(){a.fetch()},1e3)):a.$Message.error(t.errorMsg+":"+t.info)})},onCancel:function(){console.log("取消")}})},staff:function(t){var e=this;e.$router.push({name:"association_staff",query:{mode:"edit",fid:e.$route.query.fid,firmname:e.$route.query.firmname,uid:t.uid}})},addStaff:function(){var t=this;t.$router.push({name:"association_staff",query:{mode:"new",fid:t.$route.query.fid,firmname:t.$route.query.firmname}})},addCoin:function(){var t=this,e=t.listData.map(function(t){return t.uid});this.$Modal.confirm({render:function(e){return e("div",[e("h2","确认操作"),e("h4","确认批量添加员工福利点数".concat(t.coin,"?"))])},onOk:function(){Object(i["g"])({fid:t.$route.query.fid,coin:t.coin,uids:e}).then(function(e){0==e.errorCode?(t.$Message.success("员工福利点数操作成功:"),t.fetch()):t.$Message.error(e.errorMsg+":"+e.info)},function(){t.$Message.error("员工福利点数操作失败")})}})},reset:function(t){var e=this;this.$Modal.confirm({render:function(e){return e("div",[e("h2","确认操作"),e("h4","重置操作后，账号(".concat(t.username,")密码将为6个0"))])},onOk:function(){console.log("密码重置"),Object(o["d"])({uid:t.uid}).then(function(t){0==t.errorCode?e.$Message.success("员工账号密码初始化成功"):(console.log(t),e.$Message.error(t.errorMsg+":"+t.info))},function(){e.$Message.error("员工账号密码初始化失败")})}})}}},s=u,d=(a("e9e6"),a("2877")),c=Object(d["a"])(s,r,n,!1,null,"567f9b9e",null);e["default"]=c.exports},da69:function(t,e,a){},df02:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o}),a.d(e,"c",function(){return u}),a.d(e,"d",function(){return s});a("7f7f");var r=a("2777"),n=a("f121"),i=function(t){var e=t.name,a=t.pwd,i=t.type,o=n["apiHost"]+"/manage/admin/login",u=new FormData;return u.set("name",e),u.set("pwd",a),u.set("type",i),r["a"].request({url:o,method:"post",headers:{"Content-Type":"application/form-data"},data:u})},o=n["apiHost"]+"/manage/user/import",u=function(t){var e=t.pageIndex,a=t.pageSize,i=n["apiHost"]+"/manage/user/list";return r["a"].request({url:i,method:"get",params:{page_index:e,page_size:a}})},s=function(t){var e=t.uid,a=n["apiHost"]+"/manage/user/reset",i=new FormData;return i.set("uid",e),r["a"].request({url:a,method:"post",headers:{"Content-Type":"application/form-data"},data:i})}},e9e6:function(t,e,a){"use strict";var r=a("da69"),n=a.n(r);n.a}}]);