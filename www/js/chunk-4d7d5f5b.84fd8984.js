(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d7d5f5b"],{"0abf":function(e,t,r){"use strict";r.d(t,"i",function(){return u}),r.d(t,"j",function(){return i}),r.d(t,"h",function(){return s}),r.d(t,"p",function(){return d}),r.d(t,"a",function(){return c}),r.d(t,"s",function(){return m}),r.d(t,"d",function(){return f}),r.d(t,"o",function(){return p}),r.d(t,"m",function(){return l}),r.d(t,"l",function(){return g}),r.d(t,"n",function(){return h}),r.d(t,"k",function(){return _}),r.d(t,"t",function(){return v}),r.d(t,"q",function(){return b}),r.d(t,"b",function(){return y}),r.d(t,"f",function(){return D}),r.d(t,"g",function(){return q}),r.d(t,"r",function(){return w}),r.d(t,"c",function(){return I}),r.d(t,"e",function(){return $});var a=r("2777"),n=r("f121"),o=n["apiHost"],u=function(e){var t=e.fid,r=o+"/manage/firm/detail";return a["a"].request({url:r,method:"get",params:{fid:t}})},i=function(e){var t=e.pageIndex,r=e.pageSize,n=o+"/manage/firm/list";return a["a"].request({url:n,method:"get",params:{page_index:t,page_size:r}})},s=function(e){var t=o+"/manage/firm/add",r=new FormData;return r.set("firmname",e.firmName),r.set("firm_realname",e.firmRealName),r.set("balance",e.balance),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},d=function(e){var t=o+"/manage/firm/update",r=new FormData;return r.set("firmname",e.firmName),r.set("firm_realname",e.firmRealName),r.set("balance",e.balance),e.productGroup&&r.set("product_group",e.productGroup),e.categoryGroup&&r.set("category_group",e.categoryGroup),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r,params:{fid:e.fid}})},c=function(e){var t=e.pageIndex,r=e.pageSize,n=e.auth1,u=o+"/manage/firm/account";return a["a"].request({url:u,method:"get",params:{fid:n,page_index:t,page_size:r}})},m=function(e){var t=e.pageIndex,r=e.pageSize,n=e.auth1,u=o+"/manage/firm/staff/list";return a["a"].request({url:u,method:"get",params:{fid:n,page_index:t,page_size:r}})},f=function(e){var t=e.auth1,r=e.uid,n=e.uname,u=e.type,i=o+"/manage/firm/delegate";return a["a"].request({url:i,method:"get",params:{type:u,fid:t,uname:n,uid:r}})},p=function(e){var t=e.pageIndex,r=e.pageSize,n=e.fid,u=o+"/manage/product/firm/list";return a["a"].request({url:u,method:"get",params:{fid:n,product_status:1,page_index:t,page_size:r}})},l=function(e){var t=e.fid,r=e.pid,n=o+"/manage/product/firm/detail";return a["a"].request({url:n,method:"get",params:{fid:t,pid:r}})},g=function(e){var t=o+"/manage/product/firm/new",r=new FormData;return r.set("fid",e.fid),r.set("product_name",e.productName),r.set("product_realname",e.productRealname),r.set("category_id",e.categoryId),r.set("category_name",e.categoryName),r.set("category_realname",e.categoryRealname),r.set("supplier_id",e.supplierId),r.set("supplier_name",e.supplierName),r.set("supplier_realname",e.supplierRealname),r.set("product_price",e.productPrice),r.set("product_count",e.productCount),r.set("product_img",e.productImg),r.set("product_status",e.productStatus),r.set("product_desc",e.productDesc),r.set("product_banner_list",e.productBannerList.join(",")),r.set("product_detail_list",e.productDetailList.join(",")),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},h=function(e){var t=o+"/manage/product/firm/update",r=new FormData;return r.set("fid",e.fid),r.set("pid",e.pid),r.set("product_name",e.productName),r.set("product_realname",e.productRealname),r.set("category_id",e.categoryId),r.set("category_name",e.categoryName),r.set("category_realname",e.categoryRealname),r.set("supplier_id",e.supplierId),r.set("supplier_name",e.supplierName),r.set("supplier_realname",e.supplierRealname),r.set("product_price",e.productPrice),r.set("product_count",e.productCount),r.set("product_img",e.productImg),r.set("product_status",e.productStatus),r.set("product_desc",e.productDesc),r.set("product_banner_list",e.productBannerList.join(",")),r.set("product_detail_list",e.productDetailList.join(",")),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},_=function(e){var t=e.fid,r=o+"/manage/product/firm/categroy/list";return a["a"].request({url:r,method:"get",params:{fid:t,page_index:1,page_size:100}})},v=function(){var e=o+"/manage/supplier/list";return a["a"].request({url:e,method:"get",params:{page_index:1,page_size:100}})},b=function(e){var t=e.uid,r=e.fid,n=o+"/manage/firm/staff";return a["a"].request({url:n,method:"get",params:{fid:r,uid:t}})},y=function(e){var t=o+"/manage/firm/staff/add",r=new FormData;return r.set("name",e.username),r.set("realname",e.userRealname),r.set("pwd",e.password),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r,params:{fid:e.fid}})},D=function(e){var t=e.uid,r=e.fid,n=e.coin,u=o+"/manage/firm/staff/coin",i=new FormData;return i.set("data",n),a["a"].request({url:u,method:"post",headers:{"Content-Type":"application/form-data"},data:i,params:{fid:r,uid:t}})},q=function(e){var t=e.uids,r=e.fid,n=e.coin,u=o+"/manage/firm/staff/list/coin",i=new FormData;return i.set("data",n),a["a"].request({url:u,method:"post",headers:{"Content-Type":"application/form-data"},data:i,params:{fid:r,uids:t.join(",")}})},w=function(e){var t=e.fid,r=e.pageIndex,n=e.pageSize,u=o+"/manage/order/list";return a["a"].request({url:u,method:"get",params:{fid:t,page_index:r,page_size:n}})},I=function(e){var t=e.fid,r=e.orderId,n=o+"/manage/order/cancel",u=new FormData;return u.set("orderId",r),a["a"].request({url:n,method:"post",data:u,params:{fid:t}})},$=function(e){var t=e.fid,r=e.orderId,n=o+"/manage/order/deliver",u=new FormData;return u.set("orderId",r),a["a"].request({url:n,method:"post",data:u,params:{fid:t}})}},"1b3d":function(e,t,r){},"1c09":function(e,t,r){"use strict";r.r(t);var a,n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mg-staff"},[r("Breadcrumb",[r("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")]),r("BreadcrumbItem",{attrs:{to:"/home/association_list"}},[e._v("合作机构列表")]),r("BreadcrumbItem",{attrs:{to:"/home/association_account?fid="+e.$route.query.fid+"&firmname="+e.$route.query.firmname}},[e._v(e._s(e.$route.query.firmname)+": 员工列表")]),r("BreadcrumbItem",[e._v("机构"+e._s(e.$route.query.firmname)+"：员工操作页面")])],1),r("br"),e.isEdit?r("div",[r("div",{staticClass:"staff-info"},[r("div",[e._v("员工姓名: "),r("span",[e._v(e._s(e.staffInfo.username))])]),r("div",[e._v("福利点数: "),r("span",[e._v(e._s(e.staffInfo.coi))])])]),r("div",{staticStyle:{"max-width":"500px","text-align":"left"}}),r("Form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":100,width:"400"}},[r("FormItem",{attrs:{label:"福利点数调整",prop:"coin"}},[r("Input",{attrs:{placeholder:"增加或减少福利点数（减少请输入负数，比如 -100）",number:""},model:{value:e.formData.coin,callback:function(t){e.$set(e.formData,"coin",t)},expression:"formData.coin"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formData")}}},[e._v("确定")])],1)],1)],1):r("div",[r("Form",{ref:"formAddData",attrs:{model:e.formAddData,rules:e.addRules,"label-width":100,width:"400"}},[r("FormItem",{attrs:{label:"员工账号名称（username）",prop:"username"}},[r("Input",{attrs:{placeholder:"输入员工账号名称（英文拼音）"},model:{value:e.formAddData.username,callback:function(t){e.$set(e.formAddData,"username",t)},expression:"formAddData.username"}})],1),r("FormItem",{attrs:{label:"员工姓名（userRealname）",prop:"userRealname"}},[r("Input",{attrs:{placeholder:"输入员工姓名"},model:{value:e.formAddData.userRealname,callback:function(t){e.$set(e.formAddData,"userRealname",t)},expression:"formAddData.userRealname"}})],1),r("FormItem",{attrs:{label:"员工密码（password）",prop:"password"}},[r("Input",{attrs:{placeholder:"输入员工密码"},model:{value:e.formAddData.password,callback:function(t){e.$set(e.formAddData,"password",t)},expression:"formAddData.password"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAddSubmit("formAddData")}}},[e._v("确定")])],1)],1)],1)],1)},o=[],u=r("bd86"),i=(r("7f7f"),r("c5f6"),r("7cdf"),r("0abf")),s=(a={name:"staffDetail",data:function(){var e=Boolean("new"!=this.$route.query.mode),t=function(e,t,r){if(!t)return r(new Error("coin cannot be empty"));Number.isInteger(t)?r():r(new Error("Please enter a numeric value"))};return{isEdit:e,staffInfo:{},formData:{coin:null},formAddData:{username:"",userRealname:"",password:null},rules:{coin:[{validator:t,trigger:"blur"}]},addRules:{username:[{required:!0,message:"账号名称不能为空",trigger:"blur"}],userRealname:[{required:!0,message:"用户姓名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},mounted:function(){console.log("This is staffDetail")},watch:{$route:function(e,t){var r=this;"association_staff"==e&&r.fetch()}}},Object(u["a"])(a,"mounted",function(){var e=this;e.fetch()}),Object(u["a"])(a,"methods",{fetch:function(){var e=this;e.isEdit&&Object(i["q"])({fid:e.$route.query.fid,uid:e.$route.query.uid}).then(function(t){t.ok?e.staffInfo=t.data.info:e.$Message.error({content:t.errorMsg+":"+t.info,closable:!0,duration:0})})},handleAddSubmit:function(e){var t=this;this.$Modal.confirm({render:function(e){return e("div",[e("h2","确认操作"),e("h4","确认创建员工".concat(t.formAddData.username,"?"))])},onOk:function(){t.$refs[e].validate(function(e){e?Object(i["b"])({fid:t.$route.query.fid,username:t.formAddData.username,userRealname:t.formAddData.userRealname,password:t.formAddData.password}).then(function(e){0==e.errorCode?(t.$Message.success("员工创建成功, 5s后跳转回员工列表页:"),setTimeout(function(){t.$router.push({name:"association_account",query:{fid:t.$route.query.fid,firmname:t.$route.query.firmname}})},5e3)):t.$Message.error({content:e.errorMsg+":"+e.info,closable:!0,duration:0})},function(){t.$Message.error({content:"员工创建成功失败",closable:!0,duration:0})}):t.$Message.error({content:"请检查填写",closable:!0,duration:0})})}})},handleSubmit:function(e){var t=this;this.$Modal.confirm({render:function(e){return e("div",[e("h2","确认操作"),e("h4","确认添加员工福利点数".concat(t.formData.coin||0,"?"))])},onOk:function(){t.$refs[e].validate(function(e){e?Object(i["f"])({fid:t.$route.query.fid,uid:t.$route.query.uid,coin:t.formData.coin||0}).then(function(e){0==e.errorCode?(t.$Message.success("员工福利点数操作成功:"),t.fetch()):(console.log(e),t.$Message.error({content:e.errorMsg+":"+e.info,closable:!0,duration:0}))},function(){t.$Message.error({content:"员工福利点数操作失败",closable:!0,duration:0})}):t.$Message.error({content:"请检查填写",closable:!0,duration:0})})}})}}),a),d=s,c=(r("817d"),r("2877")),m=Object(c["a"])(d,n,o,!1,null,"23f5509e",null);t["default"]=m.exports},"7cdf":function(e,t,r){var a=r("5ca1");a(a.S,"Number",{isInteger:r("9c12")})},"817d":function(e,t,r){"use strict";var a=r("1b3d"),n=r.n(a);n.a},"9c12":function(e,t,r){var a=r("d3f4"),n=Math.floor;e.exports=function(e){return!a(e)&&isFinite(e)&&n(e)===e}}}]);