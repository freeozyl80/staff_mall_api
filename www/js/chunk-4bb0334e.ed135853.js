(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bb0334e"],{"0abf":function(e,t,r){"use strict";r.d(t,"h",function(){return n}),r.d(t,"i",function(){return i}),r.d(t,"g",function(){return u}),r.d(t,"o",function(){return s}),r.d(t,"a",function(){return d}),r.d(t,"c",function(){return c}),r.d(t,"n",function(){return p}),r.d(t,"l",function(){return m}),r.d(t,"k",function(){return l}),r.d(t,"m",function(){return f}),r.d(t,"j",function(){return g}),r.d(t,"r",function(){return v}),r.d(t,"p",function(){return h}),r.d(t,"e",function(){return _}),r.d(t,"f",function(){return y}),r.d(t,"q",function(){return b}),r.d(t,"b",function(){return D}),r.d(t,"d",function(){return I});var a=r("2777"),o=r("f121"),n=function(e){var t=e.fid,r=o["apiHost"]+"/manage/firm/detail";return a["a"].request({url:r,method:"get",params:{fid:t}})},i=function(e){var t=e.pageIndex,r=e.pageSize,n=o["apiHost"]+"/manage/firm/list";return a["a"].request({url:n,method:"get",params:{page_index:t,page_size:r}})},u=function(e){var t=o["apiHost"]+"/manage/firm/add",r=new FormData;return r.set("firmname",e.firmName),r.set("firm_realname",e.firmRealName),r.set("balance",e.balance),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},s=function(e){var t=o["apiHost"]+"/manage/firm/update",r=new FormData;return r.set("firmname",e.firmName),r.set("firm_realname",e.firmRealName),r.set("balance",e.balance),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r,params:{fid:e.fid}})},d=function(e){var t=e.pageIndex,r=e.pageSize,n=e.auth1,i=o["apiHost"]+"/manage/firm/account";return a["a"].request({url:i,method:"get",params:{fid:n,page_index:t,page_size:r}})},c=function(e){var t=e.auth1,r=e.uid,n=e.uname,i=e.type,u=o["apiHost"]+"/manage/firm/delegate";return a["a"].request({url:u,method:"get",params:{type:i,fid:t,uname:n,uid:r}})},p=function(e){var t=e.pageIndex,r=e.pageSize,n=e.fid,i=o["apiHost"]+"/manage/product/firm/list";return a["a"].request({url:i,method:"get",params:{fid:n,page_index:t,page_size:r}})},m=function(e){var t=e.fid,r=e.pid,n=o["apiHost"]+"/manage/product/firm/detail";return a["a"].request({url:n,method:"get",params:{fid:t,pid:r}})},l=function(e){var t=o["apiHost"]+"/manage/product/firm/new",r=new FormData;return r.set("fid",e.fid),r.set("product_name",e.productName),r.set("product_realname",e.productRealname),r.set("category_id",e.categoryId),r.set("category_name",e.categoryName),r.set("category_realname",e.categoryRealname),r.set("supplier_id",e.supplierId),r.set("supplier_name",e.supplierName),r.set("supplier_realname",e.supplierRealname),r.set("product_price",e.productPrice),r.set("product_count",e.productCount),r.set("product_img",e.productImg),r.set("product_status",e.productStatus),r.set("product_desc",e.productDesc),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},f=function(e){var t=o["apiHost"]+"/manage/product/firm/update",r=new FormData;return r.set("fid",e.fid),r.set("pid",e.pid),r.set("product_name",e.productName),r.set("product_realname",e.productRealname),r.set("category_id",e.categoryId),r.set("category_name",e.categoryName),r.set("category_realname",e.categoryRealname),r.set("supplier_id",e.supplierId),r.set("supplier_name",e.supplierName),r.set("supplier_realname",e.supplierRealname),r.set("product_price",e.productPrice),r.set("product_count",e.productCount),r.set("product_img",e.productImg),r.set("product_status",e.productStatus),r.set("product_desc",e.productDesc),a["a"].request({url:t,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},g=function(e){var t=e.fid,r=o["apiHost"]+"/manage/product/firm/categroy/list";return a["a"].request({url:r,method:"get",params:{fid:t,page_index:1,page_size:100}})},v=function(){var e=o["apiHost"]+"/manage/supplier/list";return a["a"].request({url:e,method:"get",params:{page_index:1,page_size:100}})},h=function(e){var t=e.uid,r=e.fid,n=o["apiHost"]+"/manage/firm/staff";return a["a"].request({url:n,method:"get",params:{fid:r,uid:t}})},_=function(e){var t=e.uid,r=e.fid,n=e.coin,i=o["apiHost"]+"/manage/firm/staff/coin",u=new FormData;return u.set("data",n),a["a"].request({url:i,method:"post",headers:{"Content-Type":"application/form-data"},data:u,params:{fid:r,uid:t}})},y=function(e){var t=e.uids,r=e.fid,n=e.coin,i=o["apiHost"]+"/manage/firm/staff/list/coin",u=new FormData;return u.set("data",n),a["a"].request({url:i,method:"post",headers:{"Content-Type":"application/form-data"},data:u,params:{fid:r,uids:t.join(",")}})},b=function(e){var t=e.fid,r=e.pageIndex,n=e.pageSize,i=o["apiHost"]+"/manage/order/list";return a["a"].request({url:i,method:"get",params:{fid:t,page_index:r,page_size:n}})},D=function(e){var t=e.fid,r=e.orderId,n=o["apiHost"]+"/manage/order/cancel",i=new FormData;return i.set("orderId",r),a["a"].request({url:n,method:"post",data:i,params:{fid:t}})},I=function(e){var t=e.fid,r=e.orderId,n=o["apiHost"]+"/manage/order/deliver",i=new FormData;return i.set("orderId",r),a["a"].request({url:n,method:"post",data:i,params:{fid:t}})}},4662:function(e,t,r){"use strict";var a=r("a45d"),o=r.n(a);o.a},9512:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mg-detail"},[e.isEdit?e._e():r("Divider",{attrs:{orientation:"left"}},[e._v("新增 商品")]),e.isEdit?r("Divider",{attrs:{orientation:"left"}},[e._v("编辑 商品")]):e._e(),r("div",{staticStyle:{"max-width":"500px","text-align":"left"}},[r("Form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":80}},[r("FormItem",{attrs:{label:"商品名（英文）",prop:"productName"}},[r("Input",{attrs:{placeholder:"输入商品英文简写"},model:{value:e.formData.productName,callback:function(t){e.$set(e.formData,"productName",t)},expression:"formData.productName"}})],1),r("FormItem",{attrs:{label:"商品名（全称）",prop:"productRealname"}},[r("Input",{attrs:{placeholder:"输入商品名称"},model:{value:e.formData.productRealname,callback:function(t){e.$set(e.formData,"productRealname",t)},expression:"formData.productRealname"}})],1),r("FormItem",{attrs:{label:"商品类别",prop:"categoryId"}},[r("Select",{attrs:{disabled:e.isEdit},on:{"on-change":e.confimCategory},model:{value:e.formData.categoryId,callback:function(t){e.$set(e.formData,"categoryId",t)},expression:"formData.categoryId"}},e._l(e.categoryOptions,function(t,a){return r("Option",{key:a,attrs:{value:t.cid}},[e._v(e._s(t.category_name)+" ("+e._s(t.category_realname)+")")])}),1)],1),r("FormItem",{attrs:{label:"商品价格",prop:"productPrice"}},[r("Input",{attrs:{placeholder:"请输入商品价格",type:"number"},model:{value:e.formData.productPrice,callback:function(t){e.$set(e.formData,"productPrice",t)},expression:"formData.productPrice"}})],1),r("FormItem",{attrs:{label:"商品库存",prop:"productCount"}},[r("Input",{attrs:{placeholder:"请输入商品库存",type:"number"},model:{value:e.formData.productCount,callback:function(t){e.$set(e.formData,"productCount",t)},expression:"formData.productCount"}})],1),r("FormItem",{attrs:{label:"商品图片",prop:"productImg"}},[r("Input",{attrs:{placeholder:"输入商品图片"},model:{value:e.formData.productImg,callback:function(t){e.$set(e.formData,"productImg",t)},expression:"formData.productImg"}})],1),r("FormItem",{attrs:{label:"商品状态",prop:"productStatus"}},[r("Select",{model:{value:e.formData.productStatus,callback:function(t){e.$set(e.formData,"productStatus",t)},expression:"formData.productStatus"}},e._l(e.productStatusOptions,function(t,a){return r("Option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.value))])}),1)],1),r("FormItem",{attrs:{label:"商品描述",prop:"productDesc"}},[r("Input",{attrs:{placeholder:"输入商品描述"},model:{value:e.formData.productDesc,callback:function(t){e.$set(e.formData,"productDesc",t)},expression:"formData.productDesc"}})],1),r("FormItem",{attrs:{label:"供应商名称",prop:"supplierId"}},[r("Select",{attrs:{disabled:e.isEdit},on:{"on-change":e.confimSupplier},model:{value:e.formData.supplierId,callback:function(t){e.$set(e.formData,"supplierId",t)},expression:"formData.supplierId"}},e._l(e.supplierOptions,function(t,a){return r("Option",{key:a,attrs:{value:t.supplier_id}},[e._v(e._s(t.supplier_name)+" ("+e._s(t.supplier_realname)+")")])}),1)],1),r("FormItem",[e.isEdit?r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formData")}}},[e._v("修改商品")]):e._e(),e.isEdit?e._e():r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formData")}}},[e._v("新建商品")])],1)],1)],1)],1)},o=[],n=(r("7f7f"),r("c5f6"),r("a481"),r("0abf")),i=function(e){var t={};for(var r in e){var a=e[r],o=r.replace(/\_(\w)/g,function(e,t){return t.toUpperCase()});t[o]=a}return console.log(t),t},u={name:"AssociationBusinessDetail",data:function(){var e=Boolean("new"!=this.$route.query.mode);return{isEdit:e,formData:{productName:"",productRealname:"",categoryId:null,categoryName:"",categoryRealname:"",supplierId:null,supplierName:"",supplierRealname:"",productPrice:0,productCount:0,productImg:"",productStatus:1,productDesc:""},rules:{productName:[{required:!0,message:"商品名称不能为空",trigger:"blur"}],productRealname:[{required:!0,message:"商品全称不能为空",trigger:"blur"}],categoryId:[{required:!0,type:"number",message:"请选择商品类别",trigger:"blur"}],supplierId:[{required:!0,type:"number",message:"请选择供应商",trigger:"blur"}],productPrice:[{required:!0,type:"number",message:"商品价格不能为空",trigger:"blur",transform:function(e){return Number(e)}}],productCount:[{required:!0,type:"number",message:"商品数量不能为空",trigger:"blur",transform:function(e){return Number(e)}}],productImg:[{required:!0,message:"商品图片不能为空",trigger:"blur"}],productStatus:[{required:!0,type:"number",message:"请选择商品状态",trigger:"blur"}],productDesc:[{required:!0,message:"商品描述不能为空",trigger:"blur"}]},categoryOptions:[],supplierOptions:[],categoryData:{},SupplierData:{},productStatusOptions:[{id:1,value:"状态正常"},{id:2,value:"状态失效"}]}},watch:{$route:function(e,t){var r=this;"association_business_detail"==e.name&&r.fetch()}},mounted:function(){window.test=this;var e=this;e.fetch()},methods:{handleSubmit:function(e){var t,r=this;t=r.isEdit?n["m"]:n["k"],this.$refs[e].validate(function(e){if(e){var a=Object.assign({},r.formData,r.isEdit?{fid:r.$route.query.fid,pid:r.$route.query.pid}:{fid:r.$route.query.fid});t(a).then(function(e){0==e.errorCode&&(r.$Message.success("商品操作成功"),setTimeout(function(){r.$router.push({name:"association_business",query:{fid:r.$route.query.fid,firmname:r.$route.query.firmname}})},2e3))},function(){r.$Message.error("商品操作失败")})}else r.$Message.error("请检查填写")})},fetch:function(){var e=this;Object(n["j"])({fid:e.$route.query.fid}).then(function(t){0==t.errorCode?(e.categoryOptions=t.data.list||[],t.data.list.map(function(t){e.categoryData[t.cid]={categoryName:t.category_name,categoryRealname:t.category_realname}})):e.$Message.error(t.errorMsg+":"+t.info)},function(){e.$Message.error("商品列表拉取失败")}),Object(n["r"])().then(function(t){0==t.errorCode?(e.supplierOptions=t.data.list||[],t.data.list.map(function(t){e.SupplierData[t.supplier_id]={supplierName:t.supplier_name,supplierRealname:t.supplier_realname}})):e.$Message.error(t.errorMsg+":"+t.info)},function(){e.$Message.error("供应商列表拉取失败")}),e.isEdit&&Object(n["l"])({fid:e.$route.query.fid,pid:e.$route.query.pid}).then(function(t){0==t.errorCode?(t.data.product_status=parseInt(t.data.productStatus,10),t.data.category_id=parseInt(t.data.productStatus,10),t.data.product_price=parseInt(t.data.productPrice,10),t.data.product_count=parseInt(t.data.productCount,10),e.formData=i(t.data.info)||[]):e.$Message.error(t.errorMsg+":"+t.info)},function(){e.$Message.error("商品详情拉取失败")})},confimCategory:function(e){var t=this;t.formData.categoryName=t.categoryData[e].categoryName,t.formData.categoryRealname=t.categoryData[e].categoryRealname},confimSupplier:function(e){var t=this;t.formData.supplierName=t.categoryData[e].supplierName,t.formData.supplierRealname=t.categoryData[e].supplierRealname}}},s=u,d=(r("4662"),r("2877")),c=Object(d["a"])(s,a,o,!1,null,"5494e2ad",null);t["default"]=c.exports},a45d:function(e,t,r){},a481:function(e,t,r){"use strict";var a=r("cb7c"),o=r("4bf8"),n=r("9def"),i=r("4588"),u=r("0390"),s=r("5f1b"),d=Math.max,c=Math.min,p=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,l=/\$([$&`']|\d\d?)/g,f=function(e){return void 0===e?e:String(e)};r("214f")("replace",2,function(e,t,r,g){return[function(a,o){var n=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,o):r.call(String(n),a,o)},function(e,t){var o=g(r,e,this,t);if(o.done)return o.value;var p=a(e),m=String(this),l="function"===typeof t;l||(t=String(t));var h=p.global;if(h){var _=p.unicode;p.lastIndex=0}var y=[];while(1){var b=s(p,m);if(null===b)break;if(y.push(b),!h)break;var D=String(b[0]);""===D&&(p.lastIndex=u(m,n(p.lastIndex),_))}for(var I="",q=0,$=0;$<y.length;$++){b=y[$];for(var S=String(b[0]),x=d(c(i(b.index),m.length),0),N=[],w=1;w<b.length;w++)N.push(f(b[w]));var C=b.groups;if(l){var k=[S].concat(N,x,m);void 0!==C&&k.push(C);var R=String(t.apply(void 0,k))}else R=v(S,m,x,N,C,t);x>=q&&(I+=m.slice(q,x)+R,q=x+S.length)}return I+m.slice(q)}];function v(e,t,a,n,i,u){var s=a+e.length,d=n.length,c=l;return void 0!==i&&(i=o(i),c=m),r.call(u,c,function(r,o){var u;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(s);case"<":u=i[o.slice(1,-1)];break;default:var c=+o;if(0===c)return r;if(c>d){var m=p(c/10);return 0===m?r:m<=d?void 0===n[m-1]?o.charAt(1):n[m-1]+o.charAt(1):r}u=n[c-1]}return void 0===u?"":u})}})}}]);