(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c5501f14"],{"0abf":function(t,e,r){"use strict";r.d(e,"i",function(){return o}),r.d(e,"j",function(){return u}),r.d(e,"h",function(){return c}),r.d(e,"p",function(){return s}),r.d(e,"a",function(){return d}),r.d(e,"s",function(){return f}),r.d(e,"d",function(){return p}),r.d(e,"o",function(){return l}),r.d(e,"m",function(){return m}),r.d(e,"l",function(){return g}),r.d(e,"n",function(){return _}),r.d(e,"k",function(){return h}),r.d(e,"t",function(){return v}),r.d(e,"q",function(){return y}),r.d(e,"b",function(){return b}),r.d(e,"f",function(){return D}),r.d(e,"g",function(){return w}),r.d(e,"r",function(){return x}),r.d(e,"c",function(){return S}),r.d(e,"e",function(){return k});var a=r("2777"),n=r("f121"),i=n["apiHost"],o=function(t){var e=t.fid,r=i+"/manage/firm/detail";return a["a"].request({url:r,method:"get",params:{fid:e}})},u=function(t){var e=t.pageIndex,r=t.pageSize,n=i+"/manage/firm/list";return a["a"].request({url:n,method:"get",params:{page_index:e,page_size:r}})},c=function(t){var e=i+"/manage/firm/add",r=new FormData;return r.set("firmname",t.firmName),r.set("firm_realname",t.firmRealName),r.set("balance",t.balance),a["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},s=function(t){var e=i+"/manage/firm/update",r=new FormData;return r.set("firmname",t.firmName),r.set("firm_realname",t.firmRealName),r.set("balance",t.balance),t.productGroup&&r.set("product_group",t.productGroup),t.categoryGroup&&r.set("category_group",t.categoryGroup),a["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:r,params:{fid:t.fid}})},d=function(t){var e=t.pageIndex,r=t.pageSize,n=t.auth1,o=i+"/manage/firm/account";return a["a"].request({url:o,method:"get",params:{fid:n,page_index:e,page_size:r}})},f=function(t){var e=t.pageIndex,r=t.pageSize,n=t.auth1,o=i+"/manage/firm/staff/list";return a["a"].request({url:o,method:"get",params:{fid:n,page_index:e,page_size:r}})},p=function(t){var e=t.auth1,r=t.uid,n=t.uname,o=t.type,u=i+"/manage/firm/delegate";return a["a"].request({url:u,method:"get",params:{type:o,fid:e,uname:n,uid:r}})},l=function(t){var e=t.pageIndex,r=t.pageSize,n=t.fid,o=i+"/manage/product/firm/list";return a["a"].request({url:o,method:"get",params:{fid:n,product_status:1,page_index:e,page_size:r}})},m=function(t){var e=t.fid,r=t.pid,n=i+"/manage/product/firm/detail";return a["a"].request({url:n,method:"get",params:{fid:e,pid:r}})},g=function(t){var e=i+"/manage/product/firm/new",r=new FormData;return r.set("fid",t.fid),r.set("product_name",t.productName),r.set("product_realname",t.productRealname),r.set("category_id",t.categoryId),r.set("category_name",t.categoryName),r.set("category_realname",t.categoryRealname),r.set("supplier_id",t.supplierId),r.set("supplier_name",t.supplierName),r.set("supplier_realname",t.supplierRealname),r.set("product_price",t.productPrice),r.set("product_count",t.productCount),r.set("product_img",t.productImg),r.set("product_status",t.productStatus),r.set("product_desc",t.productDesc),r.set("product_banner_list",t.productBannerList.join(",")),r.set("product_detail_list",t.productDetailList.join(",")),a["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},_=function(t){var e=i+"/manage/product/firm/update",r=new FormData;return r.set("fid",t.fid),r.set("pid",t.pid),r.set("product_name",t.productName),r.set("product_realname",t.productRealname),r.set("category_id",t.categoryId),r.set("category_name",t.categoryName),r.set("category_realname",t.categoryRealname),r.set("supplier_id",t.supplierId),r.set("supplier_name",t.supplierName),r.set("supplier_realname",t.supplierRealname),r.set("product_price",t.productPrice),r.set("product_count",t.productCount),r.set("product_img",t.productImg),r.set("product_status",t.productStatus),r.set("product_desc",t.productDesc),r.set("product_banner_list",t.productBannerList.join(",")),r.set("product_detail_list",t.productDetailList.join(",")),a["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:r})},h=function(t){var e=t.fid,r=i+"/manage/product/firm/categroy/list";return a["a"].request({url:r,method:"get",params:{fid:e,page_index:1,page_size:100}})},v=function(){var t=i+"/manage/supplier/list";return a["a"].request({url:t,method:"get",params:{page_index:1,page_size:100}})},y=function(t){var e=t.uid,r=t.fid,n=i+"/manage/firm/staff";return a["a"].request({url:n,method:"get",params:{fid:r,uid:e}})},b=function(t){var e=i+"/manage/firm/staff/add",r=new FormData;return r.set("name",t.username),r.set("realname",t.userRealname),r.set("pwd",t.password),a["a"].request({url:e,method:"post",headers:{"Content-Type":"application/form-data"},data:r,params:{fid:t.fid}})},D=function(t){var e=t.uid,r=t.fid,n=t.coin,o=i+"/manage/firm/staff/coin",u=new FormData;return u.set("data",n),a["a"].request({url:o,method:"post",headers:{"Content-Type":"application/form-data"},data:u,params:{fid:r,uid:e}})},w=function(t){var e=t.uids,r=t.fid,n=t.coin,o=i+"/manage/firm/staff/list/coin",u=new FormData;return u.set("data",n),a["a"].request({url:o,method:"post",headers:{"Content-Type":"application/form-data"},data:u,params:{fid:r,uids:e.join(",")}})},x=function(t){var e=t.fid,r=t.pageIndex,n=t.pageSize,o=i+"/manage/order/list";return a["a"].request({url:o,method:"get",params:{fid:e,page_index:r,page_size:n}})},S=function(t){var e=t.fid,r=t.orderId,n=i+"/manage/order/cancel",o=new FormData;return o.set("orderId",r),a["a"].request({url:n,method:"post",data:o,params:{fid:e}})},k=function(t){var e=t.fid,r=t.orderId,n=i+"/manage/order/deliver",o=new FormData;return o.set("orderId",r),a["a"].request({url:n,method:"post",data:o,params:{fid:e}})}},"1c4c":function(t,e,r){"use strict";var a=r("9b43"),n=r("5ca1"),i=r("4bf8"),o=r("1fa8"),u=r("33a4"),c=r("9def"),s=r("f1ae"),d=r("27ee");n(n.S+n.F*!r("5cc5")(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,n,f,p=i(t),l="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,_=void 0!==g,h=0,v=d(p);if(_&&(g=a(g,m>2?arguments[2]:void 0,2)),void 0==v||l==Array&&u(v))for(e=c(p.length),r=new l(e);e>h;h++)s(r,h,_?g(p[h],h):p[h]);else for(f=v.call(p),r=new l;!(n=f.next()).done;h++)s(r,h,_?o(f,g,[n.value,h],!0):n.value);return r.length=h,r}})},"4ad0":function(t,e,r){"use strict";var a=r("e4c1"),n=r.n(a);n.a},"4f7f":function(t,e,r){"use strict";var a=r("c26b"),n=r("b39a"),i="Set";t.exports=r("e0b8")(i,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return a.def(n(this,i),t=0===t?0:t,t)}},a)},"5d2c":function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"b",function(){return u});var a=r("2777"),n=r("f121"),i=n["apiHost"],o=i+"/manage/product/import",u=function(t){var e=t.pageIndex,r=t.pageSize,n=t.productStatus,o=i+"/manage/product/list";return a["a"].request({url:o,method:"get",params:{product_status:n,page_index:e,page_size:r}})}},"5df3":function(t,e,r){"use strict";var a=r("02f4")(!0);r("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=a(e,r),this._i+=t.length,{value:t,done:!1})})},"67ab":function(t,e,r){var a=r("ca5a")("meta"),n=r("d3f4"),i=r("69a8"),o=r("86cc").f,u=0,c=Object.isExtensible||function(){return!0},s=!r("79e5")(function(){return c(Object.preventExtensions({}))}),d=function(t){o(t,a,{value:{i:"O"+ ++u,w:{}}})},f=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,a)){if(!c(t))return"F";if(!e)return"E";d(t)}return t[a].i},p=function(t,e){if(!i(t,a)){if(!c(t))return!0;if(!e)return!1;d(t)}return t[a].w},l=function(t){return s&&m.NEED&&c(t)&&!i(t,a)&&d(t),t},m=t.exports={KEY:a,NEED:!1,fastKey:f,getWeak:p,onFreeze:l}},"9ae3":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mg-detail"},[r("Divider",{attrs:{orientation:"left"}},[t._v("所有商品列表")]),r("Select",{staticStyle:{width:"200px"},on:{"on-change":t.select},model:{value:t.firmData,callback:function(e){t.firmData=e},expression:"firmData"}},t._l(t.firmList,function(e){return r("Option",{key:e.fid,attrs:{value:e.fid}},[t._v(t._s(e.firmname))])}),1),r("Button",{staticStyle:{margin:"30px 0 30px"},attrs:{type:"primary"},on:{click:function(e){return t.addToFirm()}}},[t._v("勾选后, 导入机构")]),r("br"),r("label",[t._v("商品状态   ")]),r("Select",{staticStyle:{width:"200px"},on:{"on-change":t.reload},model:{value:t.productStatus,callback:function(e){t.productStatus=e},expression:"productStatus"}},[r("Option",{attrs:{value:"1"}},[t._v("有效商品管理")]),r("Option",{attrs:{value:"2"}},[t._v("失效商品管理")])],1),r("br"),r("Button",{staticStyle:{margin:"30px 0 30px"},attrs:{type:"primary"},on:{click:function(e){return t.importProduct()}}},[t._v("+ 导入商品列表")]),r("Table",{ref:"selection",attrs:{columns:t.columns,data:t.listData},on:{"on-selection-change":t.choose},scopedSlots:t._u([{key:"product_img",fn:function(t){var e=t.row;t.index;return[r("img",{staticStyle:{width:"85px",height:"85px","object-fit":"contain",border:"1px solid #999"},attrs:{src:e.product_img}})]}},{key:"product_status",fn:function(e){var a=e.row;e.index;return[1==a.product_status?r("div",{staticStyle:{color:"#2b85e4"}},[t._v("状态正常")]):r("div",[t._v("已下线")])]}},{key:"action",fn:function(e){var a=e.row;e.index;return[r("Button",{staticClass:"mg-button",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.manage(a)}}},[t._v("管理商品相关")])]}}])}),[r("Page",{attrs:{total:t.total,"show-sizer":!1,"page-size":t.pageData.pageSize,current:t.pageData.pageIndex},on:{"on-change":t.jump}})]],2)},n=[],i=(r("4f7f"),r("5df3"),r("1c4c"),r("ac6a"),r("28a5"),r("0abf")),o=r("5d2c"),u={name:"ProductList",data:function(){return{total:0,productStatus:"1",pageData:{pageSize:20,pageIndex:1},firmData:"",firmList:[],firmDetail:{},firmChoosePid:[],firmChooseCid:[],columns:[{type:"selection",width:60,align:"center"},{title:"商品id",key:"pid",width:60},{title:"商品名",key:"product_name"},{title:"商品全称",key:"product_realname"},{title:"商品类别",key:"category_name"},{title:"商品类别全称",key:"category_realname"},{title:"商品价格",key:"product_price"},{title:"商品描述",key:"product_desc"},{title:"商品库存",key:"product_count"},{title:"商品图片",key:"product_img",slot:"product_img",width:120},{title:"商品状态",key:"product_status",slot:"product_status"},{title:"供应商简称",key:"supplier_name"},{title:"供应商名称",key:"supplier_realname"},{title:"操作",key:"action",slot:"action"}],listData:[]}},watch:{$route:"fetch",firmDetail:function(){var t=this,e=t.firmDetail.product_group?t.firmDetail.product_group.split(","):[];t.listData.forEach(function(t){t._disabled=!1}),e.forEach(function(e){t.listData.forEach(function(t){t.pid==e&&(t._disabled=!0)})})}},mounted:function(){window.test=this;var t=this;t.fetch()},methods:{importProduct:function(){this.$router.push({name:"product_import"})},jump:function(t){var e=this;e.pageData.pageIndex=t,e.fetch(e.pageData.pageIndex,e.pageData.pageSize)},reload:function(){var t=this;t.pageData={pageSize:20,pageIndex:1},t.fetch()},fetch:function(t,e){var r=this;Object(o["b"])({productStatus:parseInt(r.productStatus,10),pageIndex:t||r.pageData.pageIndex,pageSize:e||r.pageData.pageSize}).then(function(t){if(t.ok){r.total=t.data.total;var e=t.data.list||[];e.forEach(function(t){t._disabled=!1}),r.listData=e}else r.$Message.error(t.errorMsg+":"+t.info)}),Object(i["j"])({pageIndex:1,pageSize:100}).then(function(t){0==t.errorCode?r.firmList=t.data.list||[]:r.$Message.error(t.errorMsg+":"+t.info)},function(t){r.$Message.error(t+":"+res.info)})},manage:function(t){var e=this;e.$router.push({name:"association_business_detail",query:{pid:t.pid,mode:"edit"}})},select:function(t){var e=this;Object(i["i"])({fid:t}).then(function(t){0==t.errorCode?e.firmDetail=t.data.info:e.$Message.error("机构查询失败")},function(){e.$Message.error("机构查询失败")})},choose:function(t){var e=this,r=t.map(function(t){return t.pid}),a=t.map(function(t){return t.cid});e.firmChoosePid=r,e.firmChooseCid=a},addToFirm:function(){var t=this;t.firmData||t.$Message.error("请选择机构"),0==t.firmChoosePid.length&&t.$Message.error("请勾选需要的商品");var e=t.genGroup();Object(i["p"])({fid:t.firmData,firmName:t.firmDetail.firm_name,firmRealName:t.firmDetail.firm_realname,balance:t.firmDetail.balance,productGroup:e.productGroup,categoryGroup:e.categoryGroup}).then(function(e){0==e.errorCode&&(t.$Message.success("机构更新成功:"+e.data.firmname+"("+e.data.firm_realname+")"),setTimeout(function(){window.location.reload()},2e3))},function(){t.$Message.error("机构更新失败")})},genGroup:function(){var t=this,e={},r=t.firmDetail.product_group?t.firmDetail.product_group+",":t.firmDetail.product_group,a=t.firmDetail.category_group?t.firmDetail.category_group.split(","):[];function n(t){return Array.from(new Set(t))}return e.productGroup=r+t.firmChoosePid.join(","),e.categoryGroup=n(a.concat(t.firmChooseCid)).join(","),e}}},c=u,s=(r("4ad0"),r("2877")),d=Object(s["a"])(c,a,n,!1,null,"722a621b",null);e["default"]=d.exports},b39a:function(t,e,r){var a=r("d3f4");t.exports=function(t,e){if(!a(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},c26b:function(t,e,r){"use strict";var a=r("86cc").f,n=r("2aeb"),i=r("dcbc"),o=r("9b43"),u=r("f605"),c=r("4a59"),s=r("01f9"),d=r("d53b"),f=r("7a56"),p=r("9e1e"),l=r("67ab").fastKey,m=r("b39a"),g=p?"_s":"size",_=function(t,e){var r,a=l(e);if("F"!==a)return t._i[a];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,s){var d=t(function(t,a){u(t,d,e,"_i"),t._t=e,t._i=n(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=a&&c(a,r,t[s],t)});return i(d.prototype,{clear:function(){for(var t=m(this,e),r=t._i,a=t._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete r[a.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var r=m(this,e),a=_(r,t);if(a){var n=a.n,i=a.p;delete r._i[a.i],a.r=!0,i&&(i.n=n),n&&(n.p=i),r._f==a&&(r._f=n),r._l==a&&(r._l=i),r[g]--}return!!a},forEach:function(t){m(this,e);var r,a=o(t,arguments.length>1?arguments[1]:void 0,3);while(r=r?r.n:this._f){a(r.v,r.k,this);while(r&&r.r)r=r.p}},has:function(t){return!!_(m(this,e),t)}}),p&&a(d.prototype,"size",{get:function(){return m(this,e)[g]}}),d},def:function(t,e,r){var a,n,i=_(t,e);return i?i.v=r:(t._l=i={i:n=l(e,!0),k:e,v:r,p:a=t._l,n:void 0,r:!1},t._f||(t._f=i),a&&(a.n=i),t[g]++,"F"!==n&&(t._i[n]=i)),t},getEntry:_,setStrong:function(t,e,r){s(t,e,function(t,r){this._t=m(t,e),this._k=r,this._l=void 0},function(){var t=this,e=t._k,r=t._l;while(r&&r.r)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?d(0,"keys"==e?r.k:"values"==e?r.v:[r.k,r.v]):(t._t=void 0,d(1))},r?"entries":"values",!r,!0),f(e)}}},e0b8:function(t,e,r){"use strict";var a=r("7726"),n=r("5ca1"),i=r("2aba"),o=r("dcbc"),u=r("67ab"),c=r("4a59"),s=r("f605"),d=r("d3f4"),f=r("79e5"),p=r("5cc5"),l=r("7f20"),m=r("5dbc");t.exports=function(t,e,r,g,_,h){var v=a[t],y=v,b=_?"set":"add",D=y&&y.prototype,w={},x=function(t){var e=D[t];i(D,t,"delete"==t?function(t){return!(h&&!d(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!d(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!d(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof y&&(h||D.forEach&&!f(function(){(new y).entries().next()}))){var S=new y,k=S[b](h?{}:-0,1)!=S,z=f(function(){S.has(1)}),C=p(function(t){new y(t)}),I=!h&&f(function(){var t=new y,e=5;while(e--)t[b](e,e);return!t.has(-0)});C||(y=e(function(e,r){s(e,y,t);var a=m(new v,e,y);return void 0!=r&&c(r,_,a[b],a),a}),y.prototype=D,D.constructor=y),(z||I)&&(x("delete"),x("has"),_&&x("get")),(I||k)&&x(b),h&&D.clear&&delete D.clear}else y=g.getConstructor(e,t,_,b),o(y.prototype,r),u.NEED=!0;return l(y,t),w[t]=y,n(n.G+n.W+n.F*(y!=v),w),h||g.setStrong(y,t,_),y}},e4c1:function(t,e,r){},f1ae:function(t,e,r){"use strict";var a=r("86cc"),n=r("4630");t.exports=function(t,e,r){e in t?a.f(t,e,n(0,r)):t[e]=r}}}]);