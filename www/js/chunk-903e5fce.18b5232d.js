(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-903e5fce"],{"0abf":function(e,a,t){"use strict";t.d(a,"g",function(){return n}),t.d(a,"h",function(){return o}),t.d(a,"f",function(){return u}),t.d(a,"n",function(){return s}),t.d(a,"a",function(){return m}),t.d(a,"c",function(){return d}),t.d(a,"m",function(){return f}),t.d(a,"k",function(){return p}),t.d(a,"j",function(){return c}),t.d(a,"l",function(){return l}),t.d(a,"i",function(){return g}),t.d(a,"q",function(){return _}),t.d(a,"o",function(){return h}),t.d(a,"d",function(){return b}),t.d(a,"e",function(){return v}),t.d(a,"p",function(){return D}),t.d(a,"b",function(){return y});var r=t("2777"),i=t("f121"),n=function(e){var a=e.fid,t=i["apiHost"]+"/manage/firm/detail";return r["a"].request({url:t,method:"get",params:{fid:a}})},o=function(e){var a=e.pageIndex,t=e.pageSize,n=i["apiHost"]+"/manage/firm/list";return r["a"].request({url:n,method:"get",params:{page_index:a,page_size:t}})},u=function(e){var a=i["apiHost"]+"/manage/firm/add",t=new FormData;return t.set("firmname",e.firmName),t.set("firm_realname",e.firmRealName),t.set("balance",e.balance),r["a"].request({url:a,method:"post",headers:{"Content-Type":"application/form-data"},data:t})},s=function(e){var a=i["apiHost"]+"/manage/firm/update",t=new FormData;return t.set("firmname",e.firmName),t.set("firm_realname",e.firmRealName),t.set("balance",e.balance),r["a"].request({url:a,method:"post",headers:{"Content-Type":"application/form-data"},data:t,params:{fid:e.fid}})},m=function(e){var a=e.pageIndex,t=e.pageSize,n=e.auth1,o=i["apiHost"]+"/manage/firm/account";return r["a"].request({url:o,method:"get",params:{fid:n,page_index:a,page_size:t}})},d=function(e){var a=e.auth1,t=e.uid,n=e.uname,o=e.type,u=i["apiHost"]+"/manage/firm/delegate";return r["a"].request({url:u,method:"get",params:{type:o,fid:a,uname:n,uid:t}})},f=function(e){var a=e.pageIndex,t=e.pageSize,n=e.fid,o=i["apiHost"]+"/manage/product/firm/list";return r["a"].request({url:o,method:"get",params:{fid:n,page_index:a,page_size:t}})},p=function(e){var a=e.fid,t=e.pid,n=i["apiHost"]+"/manage/product/firm/detail";return r["a"].request({url:n,method:"get",params:{fid:a,pid:t}})},c=function(e){var a=i["apiHost"]+"/manage/product/firm/new",t=new FormData;return t.set("fid",e.fid),t.set("product_name",e.productName),t.set("product_realname",e.productRealname),t.set("category_id",e.categoryId),t.set("category_name",e.categoryName),t.set("category_realname",e.categoryRealname),t.set("supplier_id",e.supplierId),t.set("supplier_name",e.supplierName),t.set("supplier_realname",e.supplierRealname),t.set("product_price",e.productPrice),t.set("product_count",e.productCount),t.set("product_img",e.productImg),t.set("product_status",e.productStatus),t.set("product_desc",e.productDesc),r["a"].request({url:a,method:"post",headers:{"Content-Type":"application/form-data"},data:t})},l=function(e){var a=i["apiHost"]+"/manage/product/firm/update",t=new FormData;return t.set("fid",e.fid),t.set("pid",e.pid),t.set("product_name",e.productName),t.set("product_realname",e.productRealname),t.set("category_id",e.categoryId),t.set("category_name",e.categoryName),t.set("category_realname",e.categoryRealname),t.set("supplier_id",e.supplierId),t.set("supplier_name",e.supplierName),t.set("supplier_realname",e.supplierRealname),t.set("product_price",e.productPrice),t.set("product_count",e.productCount),t.set("product_img",e.productImg),t.set("product_status",e.productStatus),t.set("product_desc",e.productDesc),r["a"].request({url:a,method:"post",headers:{"Content-Type":"application/form-data"},data:t})},g=function(e){var a=e.fid,t=i["apiHost"]+"/manage/product/firm/categroy/list";return r["a"].request({url:t,method:"get",params:{fid:a,page_index:1,page_size:100}})},_=function(){var e=i["apiHost"]+"/manage/supplier/list";return r["a"].request({url:e,method:"get",params:{page_index:1,page_size:100}})},h=function(e){var a=e.uid,t=e.fid,n=i["apiHost"]+"/manage/firm/staff";return r["a"].request({url:n,method:"get",params:{fid:t,uid:a}})},b=function(e){var a=e.uid,t=e.fid,n=e.coin,o=i["apiHost"]+"/manage/firm/staff/coin",u=new FormData;return u.set("data",n),r["a"].request({url:o,method:"post",headers:{"Content-Type":"application/form-data"},data:u,params:{fid:t,uid:a}})},v=function(e){var a=e.uids,t=e.fid,n=e.coin,o=i["apiHost"]+"/manage/firm/staff/list/coin",u=new FormData;return u.set("data",n),r["a"].request({url:o,method:"post",headers:{"Content-Type":"application/form-data"},data:u,params:{fid:t,uids:a.join(",")}})},D=function(e){var a=e.fid,t=e.pageIndex,n=e.pageSize,o=i["apiHost"]+"/manage/order/list";return r["a"].request({url:o,method:"get",params:{fid:a,page_index:t,page_size:n}})},y=function(e){var a=e.fid,t=e.orderId,n=i["apiHost"]+"/manage/order/cancel",o=new FormData;return o.set("orderId",t),r["a"].request({url:n,method:"get",data:o,params:{fid:a}})}},"61d6":function(e,a,t){},6976:function(e,a,t){"use strict";var r=t("61d6"),i=t.n(r);i.a},"7d00":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"mg-detail"},[e.isEdit?e._e():t("Divider",{attrs:{orientation:"left"}},[e._v("新建 合作机构")]),e.isEdit?t("Divider",{attrs:{orientation:"left"}},[e._v("编辑 合作机构")]):e._e(),t("div",{staticStyle:{"max-width":"500px","text-align":"left"}},[t("Form",{ref:"formData",attrs:{model:e.formData,rules:e.rules,"label-width":80}},[t("FormItem",{attrs:{label:"机构简称（英文）",prop:"firmName"}},[t("Input",{attrs:{placeholder:"输入firmName",disabled:e.isEdit},model:{value:e.formData.firmName,callback:function(a){e.$set(e.formData,"firmName",a)},expression:"formData.firmName"}})],1),t("FormItem",{attrs:{label:"机构全称",prop:"firmRealName"}},[t("Input",{attrs:{placeholder:"输入机构全称",disabled:e.isEdit},model:{value:e.formData.firmRealName,callback:function(a){e.$set(e.formData,"firmRealName",a)},expression:"formData.firmRealName"}})],1),t("FormItem",{attrs:{label:"机构金额",prop:"balance"}},[t("Input",{attrs:{placeholder:"输入机构初始金额",type:"number"},model:{value:e.formData.balance,callback:function(a){e.$set(e.formData,"balance",a)},expression:"formData.balance"}})],1),t("FormItem",[e.isEdit?e._e():t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmit("formData",1)}}},[e._v("新建合作机构")]),e.isEdit?t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmit("formData",2)}}},[e._v("更新合作机构")]):e._e()],1)],1)],1)],1)},i=[],n=(t("7f7f"),t("0abf")),o={name:"AssociationDetail",data:function(){var e=Boolean("new"!=this.$route.query.mode);return{isEdit:e,formData:{firmName:"",firmRealName:"",balance:0},rules:{firmName:[{required:!0,message:"机构名称不能为空",trigger:"blur"}],firmRealName:[{required:!0,message:"机构全称不能为空",trigger:"blur"}],balance:[{required:!0,message:"机构初始金额不能为空",trigger:"blur"}]}}},mounted:function(){var e=this;e.fetchData()},methods:{fetchData:function(){var e=this;e.isEdit&&Object(n["g"])({fid:e.$route.query.fid}).then(function(a){0==a.errorCode?(e.formData["firmName"]=a.data.info.firm_name,e.formData["firmRealName"]=a.data.info.firm_realname,e.formData["balance"]=a.data.info.balance):e.$Message.error("机构查询失败")},function(){e.$Message.error("机构查询失败")})},handleSubmit:function(e,a){var t=this;this.$refs[e].validate(function(e){if(e){var r=1==a?n["f"]:n["n"];r({fid:t.$route.query.fid,firmName:t.formData.firmName,firmRealName:t.formData.firmRealName,balance:t.formData.balance}).then(function(e){0==e.errorCode&&(t.$Message.success("机构更新成功:"+e.data.firmname+"("+e.data.firm_realname+")"),setTimeout(function(){t.$router.push({name:"association_list"})},2e3))},function(){t.$Message.error("机构更新失败")})}else t.$Message.error("请检查填写")})}}},u=o,s=(t("6976"),t("2877")),m=Object(s["a"])(u,r,i,!1,null,"6ab4dfde",null);a["default"]=m.exports}}]);